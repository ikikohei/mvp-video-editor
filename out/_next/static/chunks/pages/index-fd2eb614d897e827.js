(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{7748:(e,t,l)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return l(3588)}])},3588:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>T});var n=l(7693),r=l(9532),i=l(9588);let o=e=>{let t;let l=(0,i.c)(5),{color:r,fontColor:o,onClick:s,disabled:a,children:c}=e,u="rounded p-2 m-1 shadow-md ".concat(null!=r?r:"bg-blue-400"," ").concat(null!=o?o:"font-black-400");return l[0]!==u||l[1]!==s||l[2]!==a||l[3]!==c?(t=(0,n.jsx)("button",{className:u,onClick:s,disabled:a,children:c}),l[0]=u,l[1]=s,l[2]=a,l[3]=c,l[4]=t):t=l[4],t};var s=l(2364);let a={square:[1,1],fourThree:[4,3],wide:[16,8]},c=(0,s.forwardRef)((e,t)=>{let l,r,o,c,u,d,m,h,p,g,f;let v=(0,i.c)(15),{isCropping:x,children:w,onUpdateCrop:y,aspectRatio:b}=e,j=(0,s.useRef)({x:0,y:0}),N=(0,s.useRef)({width:1,height:1}),S=(0,s.useRef)(null),_=(0,s.useRef)(null);v[0]===Symbol.for("react.memo_cache_sentinel")?(l=function(e){e.stopPropagation(),e.preventDefault(),e.stopImmediatePropagation()},v[0]=l):l=v[0];let C=l,k=()=>{N.current.width=1,j.current.x=0,N.current.height=1,j.current.y=0,E()};(0,s.useImperativeHandle)(t,()=>({resetCrop:()=>{k()}}));let E=()=>{var e,t,l;let n=S.current,r=null===(e=_.current)||void 0===e?void 0:e.getBoundingClientRect();n.style.width=100*N.current.width+"%",n.style.left=j.current.x*(null!==(t=null==r?void 0:r.width)&&void 0!==t?t:0)+"px",n.style.height=100*N.current.height+"%",n.style.top=j.current.y*(null!==(l=null==r?void 0:r.height)&&void 0!==l?l:0)+"px",y(j.current,N.current)},R=e=>t=>{let l=t.nativeEvent.target,n=t.nativeEvent.clientX-l.getBoundingClientRect().left,r=t.nativeEvent.clientY-l.getBoundingClientRect().top;if(t.nativeEvent.stopPropagation(),t.nativeEvent.preventDefault(),!_.current)return;let i=_.current.getBoundingClientRect(),o=function(t){if("pos"===e){let e=j.current.x+i.left*N.current.width,l=j.current.y+i.top*N.current.height,o=t.clientX-n-i.left,s=t.clientY-r-i.top,a=S.current,c=(e-o)/i.width,u=(l-s)/i.height;s>0&&s<l&&(N.current.height=u/i.height,a.style.height=100*u+"%",j.current.y=s/i.height,a.style.top=s+"px"),o>0&&o<e&&(N.current.width=c/i.width,a.style.width=100*c+"%",j.current.x=o/i.height,a.style.left=o+"px")}if("all"===e){let e=t.clientX-n-i.left,l=t.clientY-r-i.top,o=S.current;l>0&&l+N.current.height*i.height<i.height&&(j.current.y=l/i.height,o.style.top=l+"px"),e>0&&e+N.current.width*i.width<i.width&&(j.current.x=e/i.width,o.style.left=e+"px")}if("size"===e){let e=t.clientX-i.left-j.current.x*i.width+t.movementX,l=t.clientY-i.top-j.current.y*i.height+t.movementY,n=S.current;if(b&&b in a){let t=Math.max(e,l),r=a[b][1]/a[b][0],o=t/i.height,s=t/i.width;if(o+j.current.y>1||s+j.current.x>1)return;N.current.height=o*r,n.style.height=o*r*100+"%",N.current.width=s,n.style.width=100*s+"%"}else{let t=e/i.width,r=l/i.height;l>0&&l<i.height&&(N.current.height=r,n.style.height=100*r+"%"),e>0&&e<i.width&&(N.current.width=t,n.style.width=100*t+"%")}}};window.addEventListener("mousemove",o),window.addEventListener("mouseenter",C),l.onmouseleave=function(){console.log("upp!!!"),window.removeEventListener("mousemove",o),window.removeEventListener("mouseenter",C),l.onmouseup=null,l.onmouseleave=null},l.onmouseup=function(){console.log("upp!!!"),window.removeEventListener("mousemove",o),window.removeEventListener("mouseenter",C),l.onmouseup=null,l.onmouseleave=null,E()}};v[1]!==b?(r=[b],v[1]=b,v[2]=r):r=v[2],(0,s.useEffect)(()=>{if(!b||!(b in a))return;let e=_.current.getBoundingClientRect(),{y:t}=j.current,{width:l,height:n}=N.current,r=a[b][1]/a[b][0],i=l*r*e.width;if(t+i/e.height<1)N.current.height=i/e.height;else{let t=n/r*e.height;N.current.width=t/e.width}E()},r),v[3]===Symbol.for("react.memo_cache_sentinel")?(o={width:"fit-content"},v[3]=o):o=v[3];let L=x?"block":"none";v[4]!==L?(c={display:L},v[4]=L,v[5]=c):c=v[5],v[6]===Symbol.for("react.memo_cache_sentinel")?(u=()=>!1,v[6]=u):u=v[6],v[7]===Symbol.for("react.memo_cache_sentinel")?(d={top:"-1rem",left:"-1rem"},v[7]=d):d=v[7],v[8]===Symbol.for("react.memo_cache_sentinel")?(m=()=>!1,v[8]=m):m=v[8],v[9]===Symbol.for("react.memo_cache_sentinel")?(h={bottom:"-1rem",right:"-1rem"},v[9]=h):h=v[9];let P=R("size");return v[10]===Symbol.for("react.memo_cache_sentinel")?(p=()=>!1,v[10]=p):p=v[10],v[11]!==P?(g=(0,n.jsx)("div",{className:"z-40 absolute bg-red-600 opacity-75 rounded-full w-8 h-8",style:h,draggable:!0,onMouseDown:P,onDragStart:p}),v[11]=P,v[12]=g):g=v[12],v[13]!==w?(f=(0,n.jsx)("div",{className:"w-min",children:w}),v[13]=w,v[14]=f):f=v[14],(0,n.jsxs)("div",{ref:_,className:"relative mx-auto",style:o,children:[(0,n.jsxs)("div",{className:"z-20 absolute",ref:S,style:c,children:[(0,n.jsx)("div",{className:"z-30 bg-gray-500 opacity-25 border border-black w-full h-full",draggable:!0,onMouseDown:R("all"),onDragStart:u}),(0,n.jsx)("div",{className:"z-40 absolute bg-red-600 opacity-75 rounded-full w-8 h-8",style:d,draggable:!0,onMouseDown:R("pos"),onDragStart:m}),g]}),f]})}),u=e=>{let t,l,r,o,a,c;let u=(0,i.c)(12),{logs:d}=e,m=(0,s.useRef)(null);if(u[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{m.current&&m.current.scrollIntoView({behavior:"smooth"})},u[0]=t):t=u[0],u[1]!==d?(l=[d],u[1]=d,u[2]=l):l=u[2],(0,s.useEffect)(t,l),u[3]===Symbol.for("react.memo_cache_sentinel")?(r={height:"300px"},u[3]=r):r=u[3],u[4]!==d){let e;u[6]===Symbol.for("react.memo_cache_sentinel")?(e=(e,t)=>(0,n.jsx)("p",{children:e},t),u[6]=e):e=u[6],o=d.map(e),u[4]=d,u[5]=o}else o=u[5];return u[7]!==m?(a=(0,n.jsx)("div",{ref:m,className:"w-full"}),u[7]=m,u[8]=a):a=u[8],u[9]!==o||u[10]!==a?(c=(0,n.jsxs)("div",{className:"flex flex-col break-all overflow-y-auto",style:r,children:[o,a]}),u[9]=o,u[10]=a,u[11]=c):c=u[11],c},d=e=>{let t;let l=(0,i.c)(3),{children:r,main:o}=e;return l[0]!==o||l[1]!==r?(t=o?(0,n.jsx)("div",{className:"bg-gray-100 shadow-md mb-2 p-4 rounded-md",children:r}):(0,n.jsx)("div",{className:"border-2 bg-gray-100 mb-2 p-4 rounded-md",children:r}),l[0]=o,l[1]=r,l[2]=t):t=l[2],t},m=e=>{let t=(0,i.c)(18),{type:l,size:r,color:o,children:s,weight:a,align:c,margin:u}=e,d="".concat(null!=r?r:"text-md"," ").concat(null!=o?o:"text-black"," ").concat(null!=a?a:"font-normal"," ").concat(null!=u?u:"mb-2"," ").concat(null!=c?c:"align-start");switch(l){case"h1":{let e;return t[0]!==d||t[1]!==s?(e=(0,n.jsx)("h1",{className:d,children:s}),t[0]=d,t[1]=s,t[2]=e):e=t[2],e}case"h2":{let e;return t[3]!==d||t[4]!==s?(e=(0,n.jsx)("h2",{className:d,children:s}),t[3]=d,t[4]=s,t[5]=e):e=t[5],e}case"h3":{let e;return t[6]!==d||t[7]!==s?(e=(0,n.jsx)("h3",{className:d,children:s}),t[6]=d,t[7]=s,t[8]=e):e=t[8],e}case"h4":{let e;return t[9]!==d||t[10]!==s?(e=(0,n.jsx)("h4",{className:d,children:s}),t[9]=d,t[10]=s,t[11]=e):e=t[11],e}case"p":{let e;return t[12]!==d||t[13]!==s?(e=(0,n.jsx)("p",{className:d,children:s}),t[12]=d,t[13]=s,t[14]=e):e=t[14],e}default:{let e;return t[15]!==d||t[16]!==s?(e=(0,n.jsx)("span",{className:d,children:s}),t[15]=d,t[16]=s,t[17]=e):e=t[17],e}}},h=e=>{let t;let l=(0,i.c)(6),{value:r,onChange:o,step:s,max:a,min:c}=e;return l[0]!==s||l[1]!==a||l[2]!==c||l[3]!==r||l[4]!==o?(t=(0,n.jsx)("input",{type:"number",className:"shadow-inner shadow-md mr-2 p-2 border rounded w-full",step:s,max:a,min:c,value:r,onChange:o}),l[0]=s,l[1]=a,l[2]=c,l[3]=r,l[4]=o,l[5]=t):t=l[5],t},p=e=>{let t;let l=(0,i.c)(4),{value:r,onChange:o,children:s}=e;return l[0]!==r||l[1]!==o||l[2]!==s?(t=(0,n.jsx)("select",{className:"shadow-inner shadow-md mr-2 p-2 border rounded w-full",value:r,onChange:o,children:s}),l[0]=r,l[1]=o,l[2]=s,l[3]=t):t=l[3],t},g=e=>{let t,l,r,o,s;let a=(0,i.c)(18),{value:c,min:u,max:d,onChange:m,step:p}=e,g=void 0===p?.01:p;return a[0]!==m?(t=e=>{m(Number(e.target.value))},a[0]=m,a[1]=t):t=a[1],a[2]!==g||a[3]!==d||a[4]!==u||a[5]!==c||a[6]!==t?(l=(0,n.jsx)("div",{className:"flex-shrink pr-2",children:(0,n.jsx)(h,{step:g,max:d,min:u,value:c,onChange:t})}),a[2]=g,a[3]=d,a[4]=u,a[5]=c,a[6]=t,a[7]=l):l=a[7],a[8]!==m?(r=e=>{m(Number(e.target.value))},a[8]=m,a[9]=r):r=a[9],a[10]!==d||a[11]!==u||a[12]!==c||a[13]!==r?(o=(0,n.jsx)("input",{type:"range",step:".01",className:"flex-grow p-2 w-full",max:d,min:u,value:c,onChange:r}),a[10]=d,a[11]=u,a[12]=c,a[13]=r,a[14]=o):o=a[14],a[15]!==l||a[16]!==o?(s=(0,n.jsxs)("div",{className:"flex mb-2",children:[l,o]}),a[15]=l,a[16]=o,a[17]=s):s=a[17],s},f=e=>{let t;let l=(0,i.c)(4),{value:r,onChange:o,placeholder:s}=e,a=null!=s?s:"";return l[0]!==r||l[1]!==a||l[2]!==o?(t=(0,n.jsx)("input",{type:"text",className:"shadow-inner shadow-md mr-2 p-2 border rounded w-full",value:r,placeholder:a,onChange:o}),l[0]=r,l[1]=a,l[2]=o,l[3]=t):t=l[3],t},v={mp4:{type:"video",extension:"mp4",mimetype:"video/mp4"},webp:{type:"video",extension:"webp",mimetype:"video/webp"},flv:{type:"video",extension:"flv",mimetype:"video/flv"},mov:{type:"video",extension:"mov",mimetype:"video/mov"},mp3:{type:"audio",extension:"mp3",mimetype:"audio/mp3"},wav:{type:"audio",extension:"wav",mimetype:"audio/wav"},gif:{type:"image",extension:"gif",mimetype:"image/gif"},png:{type:"image",extension:"png",mimetype:"image/png"},jpg:{type:"image",extension:"jpg",mimetype:"image/jpg"},apng:{type:"image",convertExtension:"apng",extension:"png",mimetype:"image/apng"}};var x=l(4197);let w=e=>console.log(e),y=e=>Math.round(100*e)/100,b=async function(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{fps:30,scale:1,crop:{x:0,y:0,width:1,height:1},speed:1,flags:{boomerang:!1,optimizeGif:!0}},s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:()=>{},a=arguments.length>7?arguments[7]:void 0,{fps:c,scale:u,crop:d,speed:m,flags:h,filename:p}=o,{start:g,end:f}=n,{x:y,y:b,width:N,height:S}=d,{boomerang:_,optimizeGif:C}=h,k=Number(f)-Number(g);if("gif"===r&&k>60)throw Error("Duration too long");if(isNaN(Number(f))||isNaN(Number(g)))throw Error("Invalid start/end time");try{w("[clipper] downloading info");let{extension:d,mimetype:h,type:k,convertExtension:E}=v[r],R="".concat(encodeURIComponent(t));e.name;let L="gif"!==r&&"image"===k?"out_".concat(i,"_").concat(g,"_").concat(y,"_").concat(b,"_").concat(N,"_").concat(S,".").concat(null!=E?E:d):"out-".concat(R,"_").concat(i,"_").concat(g,"_").concat(f,"_").concat(u,"_").concat(c,"_").concat(y,"_").concat(b,"_").concat(N,"_").concat(S,"_").concat(m,"_").concat(_,".").concat(null!=E?E:d),P=j("/input/tmpfile",L,r,n,o);console.log(P);let z=await new Promise((t,n)=>{let r=new Worker(l.tu(new URL(l.p+l.u(156),l.b)),{type:void 0});r.postMessage({file:e,args:P,output:L,outname:"".concat(null!=p?p:R,".").concat(d),mimetype:h}),r.onmessage=e=>{let{data:l}=e;if("log"===l.type){null==a||a(l.data);return}if("progress"in l){console.log(l),s({message:l.progress});return}"error"in l&&n(l.error),s({message:"Done"}),t(l)}});return"gif"===r&&C&&(s({message:"Optimizing Gif"}),z=(await x.Z.run({input:[{file:z,name:"input.gif"}],command:["-O2 --lossy=60 input.gif -o /out/".concat(L)]}))[0]),s({message:"Done !"}),{file:z,type:k,name:"".concat(null!=p?p:R,".").concat(d)}}catch(e){throw console.log(e),Error("Oops")}},j=(e,t,l,n,r)=>{let{fps:i,scale:o,crop:s,speed:a,flags:c}=r,{start:u,end:d}=n,{x:m,y:h,width:p,height:g}=s,{boomerang:f,fadeout:x,loop:w}=c,{type:b}=v[l],j=[];if(Number(null!=u?u:0)>=0&&(j.push("-ss",Number(null!=u?u:0).toString()),"image"===b&&"gif"!==l||j.push("-to",Number(d).toString())),j.push("-i","".concat(e)),"mp3"!==l){let e=[],t=[];if(Number(m)>=0&&Number(h)>=0&&Number(p)>0&&Number(g)>0&&e.push("crop=".concat(y(p),"*in_w:").concat(y(g),"*in_h:").concat(y(m),"*in_w:").concat(y(h),"*in_h")),a>0&&e.push("setpts=".concat(1/a,"*PTS")),i&&e.push("fps=".concat(i)),e.push("scale=".concat(o,"*in_w:-2:flags=lanczos")),f&&t.push("split=2[begin][mid];[mid]reverse[r];[begin][r]concat=n=2:v=1:a=0"),x){let e=f?2*(Number(d)-Number(u)):Number(d)-Number(u);t.push("split=2[normal][fade];[normal]trim=start=".concat(.12,",setpts=PTS-STARTPTS[start];[fade]trim=duration=").concat(.12,",setpts=PTS-STARTPTS\n        [end];[start][end]xfade=transition=fade:duration=").concat(.12,":offset=").concat(e-.24))}("gif"===l||"apng"===l)&&t.push("split[s0][s1];[s0]palettegen=reserve_transparent=on:transparency_color=ffffff:stats_mode=diff[p];[s1][p]paletteuse=dither=sierra2:diff_mode=rectangle"),t.length>0?j.push("-filter_complex","[0:v]".concat(e.join(",")).concat(t&&","+t.join(",")||"","[v]"),"-map","[v]"):j.push("-vf",e.join(","))}switch(l){case"apng":j.push("-dpi","256"),w&&j.push("-plays","0");break;case"png":case"jpg":j.push("-vframes","1");break;case"mp4":j.push("-c:v","libx264")}return j.push(t),j},N=async(e,t)=>await new Promise((n,r)=>{let i=new Worker(l.tu(new URL(l.p+l.u(752),l.b)),{type:void 0});i.postMessage({file:e,args:["-i","/input/tmpfile","output.mp4"],output:"output.mp4",outname:"output.mp4",mimetype:"video/mp4"}),i.onmessage=e=>{let{data:l}=e;if("progress"in l){null==t||t(l.progress);return}"error"in l&&r(l.error),n(l)}}),S=(e,t)=>Math.round(e*10**t)/10**t,_={},C=async function(e,t,l){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>{};if(!e)throw Error("Url is not supplied");w("[clipper] downloading info");let i=e+"-"+l;if(i in _)return n({message:"Cache Hit"}),_[i];let{data:{size:o}}=await r.Z.get("api/getSize?url="+e+"&quality="+l),s=new File([new Uint8Array((await r.Z.get("api/dlVid?url="+e+"&quality="+l,{responseType:"arraybuffer",onDownloadProgress:e=>{var t;n({message:"Downloading... ".concat(null!==(t=S(e.loaded/1e6,2))&&void 0!==t?t:0," MB/ ").concat(S(o/1e6,2)," MB (").concat(Math.round(e.loaded/o*100),"%)")})}})).data)],t);return _[i]=s,s},k=async(e,t)=>{let n=new MediaSource;return n.addEventListener("sourceopen",async()=>{console.log("source open");let r=new Worker(l.tu(new URL(l.p+l.u(202),l.b)),{type:void 0});console.log("start worker"),r.postMessage({file:e,args:["-i","/input/tmpfile","-segment_format_options","movflags=frag_keyframe+empty_moov+default_base_moof","-segment_time","1","-vf","scale='min(in_w, 1280)':-1","-f","segment","/output/%d.mp4"],output:"output.mp4",outname:"output.mp4",mimetype:"video/mp4",isStream:!0});let i=!1,o=[],s=n.addSourceBuffer('video/mp4; codecs="avc1.4D4001,mp4a.40.2"'),a=async()=>{for(i=!0;o.length>0;){let{part:e,buffer:t}=o.shift();n.duration=1+1*e,s.timestampOffset=1*e,s.appendBuffer(t),await new Promise(e=>s.addEventListener("updateend",e))}i=!1};r.onmessage=e=>{let{data:l}=e;if("segment"in l){let{part:e,buffer:t}=l.segment;o.push(t),i||a();return}if("progress"in l){null==t||t(l.progress);return}if("error"in l)throw l.error;n.endOfStream()}}),n};var E=l(5054),R=l.n(E),L=l(7138);l(9005);let P=e=>new Promise(t=>setTimeout(t,e));var z=l(4282),D=l.n(z);let T=()=>{var e,t,l,i,a;let[x,w]=(0,s.useState)("https://www.youtube.com/watch?v=ebSce4xUjo0"),[y,j]=(0,s.useState)(0),[_,E]=(0,s.useState)(0),[z,T]=(0,s.useState)(50),[U,O]=(0,s.useState)(),[I,V]=(0,s.useState)(),[B,M]=(0,s.useState)([]),[q,W]=(0,s.useState)(),[X,A]=(0,s.useState)([0,0]),[Z,G]=(0,s.useState)(30),[Y,F]=(0,s.useState)(!0),[H,J]=(0,s.useState)(),[K,Q]=(0,s.useState)("upload"),[$,ee]=(0,s.useState)(),[et,el]=(0,s.useState)({width:0,height:0}),[en,er]=(0,s.useState)({width:1,height:1}),[ei,eo]=(0,s.useState)({x:0,y:0}),[es,ea]=(0,s.useState)(),[ec,eu]=(0,s.useState)([{starttime:"",endtime:"",text:""}]),[ed,em]=(0,s.useState)(),[eh,ep]=(0,s.useState)("mp4"),[eg,ef]=(0,s.useState)(1),[ev,ex]=(0,s.useState)(30),[ew,ey]=(0,s.useState)(""),[eb,ej]=(0,s.useState)(1),[eN,eS]=(0,s.useState)(!1),[e_,eC]=(0,s.useState)(!1),[ek,eE]=(0,s.useState)(!1),[eR,eL]=(0,s.useState)(!1),[eP,ez]=(0,s.useState)(!0),[eD,eT]=(0,s.useState)(!1),[eU,eO]=(0,s.useState)([]),eI=e=>eO(t=>[...t,"".concat(new Date().toISOString()," - ").concat(e)]),eV=(0,s.useRef)(null),eB=(0,s.useRef)(null),eM=(0,s.useRef)(null),eq=(0,s.useRef)(!1),eW=e=>{var t,l,n;(null===(t=eV.current)||void 0===t?void 0:t.readyState)&&(e?null===(l=eV.current)||void 0===l||l.play():null===(n=eV.current)||void 0===n||n.pause(),eS(e))},eX=e=>{eV.current&&(eV.current.currentTime=e),E(e)};(0,s.useEffect)(()=>{var e,t;w(null!==(e=localStorage.getItem("videoUrl"))&&void 0!==e?e:""),T(null!==(t=Number(localStorage.getItem("volume")))&&void 0!==t?t:0);let l=!1,n=async()=>{await r.Z.get("api/ping"),await P(1e4),l||await n()};if(n(),eV.current)return eV.current.volume=Number(localStorage.getItem("volume"))/100,eV.current.onloadedmetadata=()=>{var e,t,l,n,r,i,o,s,a;eW(!0),eV.current&&(eV.current.muted=!1,G(30),j(Number(null!==(i=null===(e=eV.current)||void 0===e?void 0:e.duration)&&void 0!==i?i:0)),el({width:null!==(o=null===(t=eV.current)||void 0===t?void 0:t.videoWidth)&&void 0!==o?o:0,height:null!==(s=null===(l=eV.current)||void 0===l?void 0:l.videoHeight)&&void 0!==s?s:0}),ef(720/(null===(n=eV.current)||void 0===n?void 0:n.videoWidth)>1?1:720/(null===(r=eV.current)||void 0===r?void 0:r.videoWidth)),console.log(Number(localStorage.getItem("volume"))/100),eV.current.volume=Number(localStorage.getItem("volume"))/100)},eV.current.ondurationchange=()=>{var e,t,l;j(Number(null!==(l=null===(e=eV.current)||void 0===e?void 0:e.duration)&&void 0!==l?l:0)),A([0,Number(null===(t=eV.current)||void 0===t?void 0:t.duration)])},()=>{l=!0}},[]),(0,s.useEffect)(()=>{localStorage.setItem("volume",String(z)),eV.current&&(eV.current.volume=z/100)},[z]),(0,s.useEffect)(()=>{if(X[1]&&!eq.current&&_>=X[1])Y?eW(!1):eX(X[0]);else if(_<X[0]){var e;(null===(e=eV.current)||void 0===e?void 0:e.paused)||eW(!1),eX(X[0])}},[_,X,Y]),(0,s.useEffect)(()=>{let e=e=>{if(" "===e.key&&"INPUT"!==e.target.tagName){var t;(null===(t=eV.current)||void 0===t?void 0:t.paused)?eW(!0):eW(!1),e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation()}};return window.addEventListener("keypress",e),()=>{window.removeEventListener("keypress",e)}},[U]),(0,s.useEffect)(()=>{let e=B.find(e=>e.itag===q);q&&e&&(O({url:e.url,title:null!=I?I:"",type:"youtube",quality:q}),G(e.fps))},[B,q,I]);let eA=async()=>{try{let{data:{title:e,allFormats:t}}=await r.Z.get("api/vid?"+R().encode({url:x}));V(e),M(t.filter(e=>"mp4"===e.container&&e.hasVideo)),W(t.some(e=>22===e.itag)?22:18)}catch(e){O(void 0)}},eZ=async()=>{if(U)try{var e,t,l;let n;if("upload"===U.type){if(ee({message:"Loading Video..."}),!(n=null==eM?void 0:null===(t=eM.current)||void 0===t?void 0:null===(e=t.files)||void 0===e?void 0:e[0]))return;ee({message:"Loading Video..."})}else ee({message:"Downloading Video..."}),n=await C(x,null!==(l=null==U?void 0:U.title)&&void 0!==l?l:"",U.quality,ee),ee({message:"Video Downloaded"});let r=await b(n,null==U?void 0:U.title,{start:X[0],end:X[1]},eh,U.quality,{filename:ed,fps:ev,scale:eg,crop:{...ei,...en},speed:eb,flags:{boomerang:ek,fadeout:eR,loop:eD,optimizeGif:eP}},e=>ee(e),eI);(null==H?void 0:H.src)&&URL.revokeObjectURL(H.src),await eF(),J({src:URL.createObjectURL(r.file),type:r.type,name:r.name,size:r.file.size})}catch(e){ee({message:"Something Went Wrong... "+e})}},eG=(e,t,l)=>{console.log(5);let n=[...ec];n[e]={...n[e],[t]:l.currentTarget.value},eu(n)},eY=e=>{let t=new Date(0);return t.setSeconds(e),t.toISOString().substr(11,12)},eF=()=>new Promise(e=>{let t=new Blob(["WEBVTT\n\n"+ec.map(e=>"".concat(eY(e.starttime)," --> ").concat(eY(e.endtime),"\n").concat(e.text,"\n\n")).join("")],{type:"text/vtt"});ey(URL.createObjectURL(t)),e(!0)}),eH=()=>{console.log(2),eu([...ec,{starttime:"",endtime:"",text:""}])},eJ=e=>{eu(ec.filter((t,l)=>l!==e))},eK=async()=>{var e,t;let l=null==eM?void 0:null===(t=eM.current)||void 0===t?void 0:null===(e=t.files)||void 0===e?void 0:e[0];if(!l)return;let n=l.name;if(["gif"].includes(n.split(".").slice(-1)[0])?l=await N(l,e=>ee({message:e})):["ts"].includes(n.split(".").slice(-1)[0])&&(l=await k(l,e=>ee({message:e}))),O({url:URL.createObjectURL(l),title:n.split(".").slice(void 0,-1).join(""),type:"upload",quality:"local"}),!eV.current)return};return(0,n.jsx)("div",{className:"flex flex-col justify-start items-center py-2 w-screen min-h-screen",children:(0,n.jsxs)("div",{className:"flex lg:flex-row flex-col px-4 py-2 w-full lg:h-full",children:[(0,n.jsxs)("div",{className:"flex flex-col justify-start xl:justify-between gap-2 p-2 w-full lg:w-4/5",children:[(0,n.jsxs)("div",{className:"flex flex-col flex-grow-0 xl:justify-center xl:h-full",children:[(0,n.jsxs)("div",{className:"".concat((null==U?void 0:U.url)?"":"hidden"),children:[(0,n.jsx)(m,{size:"text-xl",weight:"font-bold",align:"text-center",children:"Source Video"}),(0,n.jsx)("div",{className:"relative w-full max-w-full h-full",children:(0,n.jsx)(c,{ref:eB,aspectRatio:es,onUpdateCrop:(e,t)=>{er(t),eo(e)},isCropping:e_,children:(0,n.jsx)("video",{ref:eV,src:null==U?void 0:U.url,style:{maxHeight:"500px"},className:"mb-2",onVolumeChange:e=>{T(100*e.target.volume)},onTimeUpdate:e=>{E(e.target.currentTime)},onPlay:e=>{e.target.currentTime>=X[1]&&(E(X[0]),e.target.currentTime=X[0])},autoPlay:!0})})})]}),(0,n.jsx)("div",{className:"".concat((null==U?void 0:U.url)?"hidden":""," h-64 xl:h-full flex flex-col justify-center"),children:(0,n.jsx)(m,{align:"text-center",weight:"font-bold",size:"text-lg",children:"Please select a video"})})]}),(0,n.jsx)("div",{className:"flex flex-col flex-grow-0 justify-center",children:(0,n.jsx)(m,{align:"text-center",children:$&&"".concat($.message," ").concat((null!==(e=$.ratio)&&void 0!==e?e:0)>0?$.ratio+"%":"")})}),(0,n.jsx)("div",{className:"flex flex-col flex-grow-0 justify-center xl:h-full",children:(null==H?void 0:H.src)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m,{size:"text-xl",weight:"font-bold",align:"text-center",children:"Output"}),(0,n.jsx)("div",{className:"flex justify-center",children:(null==H?void 0:H.type)==="image"?(0,n.jsx)("img",{alt:null==H?void 0:H.name,src:null==H?void 0:H.src}):(null==H?void 0:H.type)==="audio"?(0,n.jsx)("audio",{controls:!0,children:(0,n.jsx)("source",{src:null==H?void 0:H.src})}):(0,n.jsx)(D(),{url:null==H?void 0:H.src,controls:!0,config:{file:{tracks:[{kind:"subtitles",src:ew,srcLang:"en",default:!0,label:""}]}}})})]}):(0,n.jsx)("div",{className:"flex flex-col justify-center h-64 xl:h-full",children:(0,n.jsx)(m,{align:"text-center",weight:"font-bold",size:"text-lg",children:"Press Convert to Generate Output"})})}),(0,n.jsx)(d,{main:!0,children:(0,n.jsx)(u,{logs:eU})})]}),(0,n.jsxs)("div",{className:"flex gap-2 grid grid-cols-1 xl:grid-cols-2 w-full lg:w-4/5",children:[(0,n.jsxs)(d,{main:!0,children:[(0,n.jsxs)(d,{sub:!0,children:[(0,n.jsx)("div",{children:(0,n.jsx)(o,{color:"upload"===K?"bg-blue-500":"bg-blue-300",fontColor:"text-white",onClick:()=>Q("upload"),disabled:"upload"===K,children:"Local Video"})}),"youtube"===K?(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"mb-2 font-bold text-lg",children:"Enter URL"}),(0,n.jsx)(f,{value:x,onChange:e=>w(e.target.value)}),(0,n.jsxs)("div",{className:"flex flex-column items-center",children:[(0,n.jsx)(o,{color:"bg-red-500",fontColor:"text-white",onClick:()=>eA(),children:"Get Video Data"}),B.length>0&&(0,n.jsx)("div",{className:"flex-shrink",children:(0,n.jsx)(p,{value:q,onChange:e=>W(Number(e.target.value)),children:B.map(e=>(0,n.jsxs)("option",{value:e.itag,children:[e.quality," ",e.qualityLabel?"(".concat(e.qualityLabel,")"):""," ",e.hasVideo&&"Video"," ",e.hasAudio&&"Audio"]},e.itag))})})]})]}):(0,n.jsxs)("div",{children:[(0,n.jsx)(m,{weight:"font-bold",size:"text-lg",children:"Choose File"}),(0,n.jsx)("input",{ref:eM,type:"file",className:"block mr-2 p-2 border border-black rounded w-full whitespace-nowrap overflow-hidden text-overflow-ellipsis",accept:"video/*, .mkv, .ts, .gif, .webp"}),(0,n.jsx)(o,{color:"bg-red-500",fontColor:"text-white",onClick:()=>eK(),children:"Load video"})]})]}),(0,n.jsxs)(d,{sub:!0,children:[(0,n.jsxs)("div",{className:"flex flex-col mb-2",children:[(0,n.jsx)(m,{weight:"font-bold",size:"text-lg",children:"Progress"}),(0,n.jsx)(g,{step:.01,max:null!==(l=null!==(t=X[1])&&void 0!==t?t:y)&&void 0!==l?l:0,min:null!==(i=X[0])&&void 0!==i?i:0,value:S(_,2),onChange:e=>{eX(e)}}),(0,n.jsxs)("div",{className:"flex flex-wrap items-center",children:[(0,n.jsx)(o,{color:"bg-blue-200",onClick:()=>{A([_,X[1]])},children:"Set Start"}),(0,n.jsx)(o,{color:"bg-blue-200",onClick:()=>{A([X[0],_])},children:"Set End"}),(0,n.jsxs)("p",{children:["(",S(X[1]-X[0],2)," second)"]})]})]}),(0,n.jsx)(m,{weight:"font-bold",size:"text-lg",children:"Trim"}),(0,n.jsxs)("div",{className:"flex items-center mb-2 w-80",children:[(0,n.jsx)("div",{className:"flex-shrink",children:(0,n.jsx)(h,{step:".01",value:S(X[0],2),min:0,max:X[1],onChange:e=>{eX(Number(e.target.value)),E(Number(e.target.value)),A([Number(e.target.value),X[1]])}})}),(0,n.jsx)("div",{className:"flex-grow px-4 w-full",children:(0,n.jsx)(L.Z,{step:.01,min:0,max:y,defaultValue:[0,1],value:X,onRangeDragStart:()=>{var e;eq.current=!0,null===(e=eV.current)||void 0===e||e.pause()},onRangeDragEnd:()=>{var e;eq.current=!1,null===(e=eV.current)||void 0===e||e.pause()},onInput:e=>{X[0]!==e[0]?eX(e[0]):eX(e[1]),A(e)}})}),(0,n.jsx)("div",{className:"flex-shrink",children:(0,n.jsx)(h,{step:".01",value:S(X[1],2),min:X[0],max:y,onChange:e=>{eX(Number(e.target.value)),A([X[0],Number(e.target.value)])}})})]})]}),(0,n.jsxs)(d,{sub:!0,children:[(0,n.jsx)(o,{color:"bg-blue-500",fontColor:"text-white",onClick:()=>eW(!eN),children:eN?"Pause":"Play"}),(0,n.jsx)(o,{color:"bg-green-500",fontColor:"text-white",onClick:()=>F(!Y),children:Y?"Loop":"No Loop"})]})]}),(0,n.jsxs)(d,{main:!0,children:[(0,n.jsx)(d,{sub:!0,children:(0,n.jsxs)("div",{style:{marginBottom:15,display:"flex",flexDirection:"column"},children:[ec.map((e,t)=>(0,n.jsxs)("div",{style:{padding:"10px 0",borderBottom:"1px dashed #000"},children:[(0,n.jsx)("div",{style:{display:"flex"},children:(0,n.jsxs)("label",{style:{display:"flex",margin:"8px 0"},children:[(0,n.jsx)("span",{style:{flexShrink:0},children:"字幕開始時間 (seconds):"}),(0,n.jsx)(h,{step:"1",min:1,max:y,value:e.starttime,onChange:e=>{eG(t,"starttime",e)}})]})}),(0,n.jsx)("div",{style:{display:"flex"},children:(0,n.jsxs)("label",{style:{display:"flex",margin:"8px 0"},children:[(0,n.jsx)("span",{style:{flexShrink:0},children:"字幕終了時間 (seconds):"}),(0,n.jsx)(h,{step:"1",min:1,max:y,value:e.endtime,onChange:e=>{console.log(2),eG(t,"endtime",e)}})]})}),(0,n.jsxs)("label",{style:{display:"flex"},children:[(0,n.jsx)("span",{style:{flexShrink:0},children:"テキスト:"}),(0,n.jsx)(f,{value:e.text,onChange:e=>eG(t,"text",e)}),(0,n.jsx)(o,{onClick:()=>eJ(t),children:"削除"})]})]},t)),(0,n.jsx)(o,{onClick:()=>eH(),children:"字幕追加"})]})}),(0,n.jsxs)(d,{sub:!0,children:[(0,n.jsx)(m,{weight:"font-bold",size:"text-lg",type:"h3",children:"Output"}),(0,n.jsxs)("div",{className:"flex flex-row items-center mb-2",children:[(0,n.jsx)("span",{className:"mr-2",children:"Filename"}),(0,n.jsx)(f,{value:ed,placeholder:"Leave blank for default video title",onChange:e=>em(e.target.value)})]}),(0,n.jsxs)("div",{className:"flex flex-row items-center",children:[(0,n.jsx)("span",{className:"mr-2",children:"Extension"}),(0,n.jsx)("div",{children:(0,n.jsx)(p,{value:eh,onChange:e=>ep(e.target.value),children:Object.keys(v).map(e=>(0,n.jsx)("option",{value:e,children:e.toUpperCase()},e))})})]})]}),(0,n.jsxs)(d,{sub:!0,children:[(0,n.jsx)(m,{weight:"font-bold",size:"text-lg",type:"h3",children:"Convert"}),(0,n.jsx)(o,{color:"bg-blue-400",onClick:eZ,children:"Convert"}),(0,n.jsx)(o,{color:(null==H?void 0:H.src)?"bg-blue-600":"bg-gray-500",onClick:()=>{var e,t;let l=document.createElement("a");l.style.display="none",document.body.appendChild(l),l.href=null!==(e=null==H?void 0:H.src)&&void 0!==e?e:"",l.setAttribute("download",null!==(t=null==H?void 0:H.name)&&void 0!==t?t:""),l.click(),l.remove()},disabled:!(null==H?void 0:H.src),children:"Download"}),(0,n.jsxs)(m,{children:[S((null!==(a=null==H?void 0:H.size)&&void 0!==a?a:0)/1e6,2)," MB ( ~",S(et.width*eg*en.width,2),"x",S(et.height*eg*en.height,2)," px , ",Z," fps)"]})]})]})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[915,85,774,888,179],()=>t(7748)),_N_E=e.O()}]);